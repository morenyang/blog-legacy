<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>用vuejs写一个简单的todolist应用 | Moren&#39;s</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="http://morensblog-static.tengtengtengteng.com/static/img/favicon.png">
    <link rel="stylesheet" href="/blog/css/style.css">
</head>

<body>
<nav class="navbar">
    <div class="layout">
        <div class="content ">
            
            
            <a href="/blog/.">Home</a>
            
            
            
            <a href="/blog/archives">Archive</a>
            
            
            
            <a href="http://yangteng.me">About</a>
            
            
        </div>
    </div>
</nav>

<main class="post">
    <article>
    <h1 class="article-title">
        <a href="/blog/2017/03/28/cj0t3yqz90009r6tgo3mhvh2t/">用vuejs写一个简单的todolist应用</a>
    </h1>

    <section class="article-meta">
        <p class="article-date">March 28 2017</p>
    </section>

    <section class="article-entry">
        <p>我们来用vue写一个简单的todo list。</p>
<h2 id="需求和组件分析"><a href="#需求和组件分析" class="headerlink" title="需求和组件分析"></a>需求和组件分析</h2><p>一个todo应用其实没有很多需求，能满足<em>输入</em>、<em>添加事件</em>、<em>标注事件完成</em>、<em>分组展示</em>这几点即可。因此我们的面板中需要：</p>
<ul>
<li>输入框</li>
<li>事件列表</li>
<li>分组标签</li>
</ul>
<p>其实上面三项写在一个组件中即可完成所有工作，但是为了方便了解组件之间的交互，我们会把事件列表单独拆出一个组件来。</p>
<p>另外我们这里会用<code>localStorage</code>来在本机存储事件列表。当然如果你想也可以通过服务器来存取数据。</p>
<h2 id="跟技术栈有关的一些东西"><a href="#跟技术栈有关的一些东西" class="headerlink" title="跟技术栈有关的一些东西"></a>跟技术栈有关的一些东西</h2><p>使用<code>vue-cli</code>创建项目时，会帮我们自动配置好<code>webpack</code>打包工具和热部署工具，这一方面就不多赘述了。</p>
<p>在写style的时候，我们会使用<code>stylus</code>这个动态css语言来代替<code>css</code>。在项目文件夹中，我们要安装一下<code>stylus</code>相应的包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install stylus stylus-loader --save-dev</div></pre></td></tr></table></figure>
<p>安装完后，我们在<code>vue</code>中的<code>&lt;style&gt;</code>标签里要讲语言声明为<code>stylus</code>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"stylus"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>如果你使用webstorm来编写vue的话，为了让IDE能顺利识别出语法，还要标注一句：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"stylus"</span> <span class="attr">rel</span>=<span class="string">"stylesheet/stylus"</span> &gt;</span><span class="undefined"></span></div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>关于<code>stylus</code>的介绍可以移步 <a href="http://stylus-lang.com/" target="_blank" rel="external">Stylus</a></p>
<p>另外，各大IDE应该都会有<code>vue</code>相关的插件，推荐安装一下，便于标注代码高亮和这确识别语法。</p>
<p>例如在WS中，可以打开设置，在<code>plugn</code>选项中选择<strong><code>Browse respositories</code></strong>，在窗口中搜索<code>vue</code>即可找到。</p>
<p>除此之外，推荐下载Chrome的<a href="https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd" target="_blank" rel="external">vue dev-tools</a>，方便查看和分析状态和内容。</p>
<h2 id="在app-vue定义必要的数据和"><a href="#在app-vue定义必要的数据和" class="headerlink" title="在app.vue定义必要的数据和"></a>在<code>app.vue</code>定义必要的数据和</h2><p>第一步我们要在<code>app.vue</code>文件中把我们的一些必要的数据和方法给写出来。</p>
<p>打开<code>app.vue</code>，在<code>script</code>标签中添加<code>data</code>对象并向里面添加内容。</p>
<p>按照需求，我们先定义出一个<code>todo</code>对象的结构，用<code>label</code>来记录事件内容，用<code>ifFinished</code>来标注事情是否已经完成。</p>
<p><code>Todo: {label: String, isFinished: Boolean }</code></p>
<p>在这个应用中，我们还需要这几项内容：</p>
<ol>
<li><code>newTodo: Todo</code> 用来与输入框中新建的事件进行绑定；</li>
<li><code>todos: Array</code> 用来存放<code>Todo</code>的数组；</li>
<li><code>tab: String</code> 用来标注当前页的标签，有三个可选值：<code>all</code>， <code>active</code>， <code>finished</code>。</li>
</ol>
<p>因此我们在<code>data</code>中这么输入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">exprot <span class="keyword">default</span> &#123;</div><div class="line">    data() &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">newTodo</span>: <span class="string">''</span></div><div class="line">            todos: [],</div><div class="line">            <span class="attr">tab</span>: ‘All’，</div><div class="line">            tabList:[</div><div class="line">                <span class="string">'All'</span>, <span class="string">'Active'</span>, <span class="string">'Finished'</span></div><div class="line">            ]</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="完成输入的功能"><a href="#完成输入的功能" class="headerlink" title="完成输入的功能"></a>完成输入的功能</h2><p>我们先来完成录入内容的功能。</p>
<p>我们需要一个输入框，并将它与<code>newTodo.label</code>中的内容绑定。在填完内容按下<code>return</code>键时，我们将<code>newTodo</code>的内容添加到<code>todos</code>数组中。</p>
<p>在<code>template</code>里添加一个输入框，将它绑定数据并定义方法：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"todo"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"newTodo"</span> @<span class="attr">keyup.enter</span>=<span class="string">"handleAddNew"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后我们在<code>methods</code>中定义方法来接收事件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">methods: &#123;</div><div class="line">  handleAddNew()&#123;</div><div class="line">    <span class="keyword">this</span>.newTodo.length !== <span class="number">0</span> ? <span class="keyword">this</span>.todos.push(&#123;<span class="attr">label</span>: <span class="keyword">this</span>.newTodo, <span class="attr">isFinished</span>: <span class="literal">false</span>&#125;) : <span class="keyword">void</span>(<span class="number">0</span>);</div><div class="line">    <span class="keyword">this</span>.newTodo = <span class="string">''</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="特别注意"><a href="#特别注意" class="headerlink" title="特别注意"></a>特别注意</h4><p>这里要<strong>特别注意</strong>的是，在<code>data</code>中定义<code>newTodo</code>时不要直接定义整个对象(如: <code>newTodo: {label:&#39;&#39;, isFinished: false }</code>)，否则传入<code>todos</code>数组时，只会传入<code>newTodo</code>对象的引用。</p>
<p>输入内容，按下<code>return</code>，我们打开调试工具就可以看到<code>todos</code>数组中加入的内容了。</p>
<p><img src="http://morensblog-static.tengtengtengteng.com/img/post/20170328build-a-vue-todo-list-1.png" alt=""></p>
<h2 id="添加列表功能"><a href="#添加列表功能" class="headerlink" title="添加列表功能"></a>添加列表功能</h2><p>完成了输入功能，我们现在需要对<code>todos</code>中的内容进行展示。<br>新建一个<code>list.vue</code>组件。</p>
<p>在这个组件中，我们需要定义父组件<code>app.vue</code>传来的参数，因此在<code>script</code>标签中，我们定义一下参数，再添加一个<code>handleFinish</code>方法，让事件在被点击的时候标记成已完成。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'list'</span>,</div><div class="line">  <span class="attr">props</span>: [<span class="string">'todos'</span>],</div><div class="line">  <span class="attr">methods</span>: &#123;</div><div class="line">    handleFinished(item)&#123;</div><div class="line">      <span class="keyword">this</span>.$emit(<span class="string">'handleFinished'</span>, item);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后我们在<code>template</code>中循环输出父组件发过来的<code>todos</code>数组。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in todos"</span> @<span class="attr">click</span>=<span class="string">"handleFinished(item)"</span>&gt;</span>&#123;&#123; item.label &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div></pre></td></tr></table></figure>
<p>我们还要对已完成的项目进行一下标注。因此我们在该项目已完成时为<code>li</code>标签绑定一个类。<br>在<code>li</code>标签里这么写</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in todos"</span> @<span class="attr">click</span>=<span class="string">"handleFinished(item)"</span> <span class="attr">:class</span>=<span class="string">"&#123;finished: item.isFinished&#125;"</span>&gt;</span>&#123;&#123; item.label &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div></pre></td></tr></table></figure>
<p>在<code>style</code>标签里定义一下这个类：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"stylus"</span> <span class="attr">rel</span>=<span class="string">"stylesheet/stylus"</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></div><div class="line">  .finished &#123;</div><div class="line">    color #ccc</div><div class="line">    text-decoration line-through</div><div class="line">  &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>这里解释一下<strong><code>scoped</code></strong>:<br>在<code>style</code>标签中加上<code>scoped</code>属性后，当前组件中所对应的样式，只会在当前组件中被渲染，而不会影响其他外部组件。如图所示：</p>
<p><img src="http://morensblog-static.tengtengtengteng.com/img/post/20170328build-a-vue-todo-list-2.png" alt=""></p>
<h4 id="特别注意-1"><a href="#特别注意-1" class="headerlink" title="特别注意"></a>特别注意</h4><p>这里有一点是需要特别注意的：<br>在当前组件的<code>handleFinished</code>方法中，我们如果在这里直接修改<code>item</code>中的值（例如: <code>handleFinished(item){ item.isFinished = !item.isFinished }</code>），其实是有效可行的，修改后父组件中<code>todos</code>数组内的相应对象相应值也会改变。<strong>但是为了保证应用中的数据单向流动，推荐把动作一步一步冒泡传输给父组件，并在父组件里进行想应改动，并传递给子组件。</strong></p>
<h2 id="在父组件中添加相应的事件接收方法"><a href="#在父组件中添加相应的事件接收方法" class="headerlink" title="在父组件中添加相应的事件接收方法"></a>在父组件中添加相应的事件接收方法</h2><p>完成了子组件的操作，我们现在在父组件中添加相对应的接收方法。首先我们要引入子组件，并在<code>template</code>中子组件标签的中添加传参和接事件的属性：</p>
<p>首先在<code>script</code>标签中引入子组件，并在<code>components</code>对象里添加：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"todo"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"newTodo"</span> @<span class="attr">keyup.enter</span>=<span class="string">"handleAddNew"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">list</span> <span class="attr">:todos</span>=<span class="string">"todos"</span> @<span class="attr">handleFinished</span>=<span class="string">"handleFinished"</span>&gt;</span><span class="tag">&lt;/<span class="name">list</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">import</span> List <span class="keyword">from</span> <span class="string">'./components/list'</span></div><div class="line">    </div><div class="line">    <span class="keyword">export</span> <span class="keyword">default</span>&#123;</div><div class="line">        <span class="comment">//...</span></div><div class="line">        components: &#123;</div><div class="line">            List</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//...</span></div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>然后我们往<code>methods</code>对象里添加<code>handleFinished</code>方法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</div><div class="line">    <span class="comment">//...</span></div><div class="line">    methods:&#123;</div><div class="line">        <span class="comment">//...</span></div><div class="line">        handleFinished(item)&#123;</div><div class="line">          item.isFinished = !item.isFinished</div><div class="line">        &#125;        </div><div class="line">    &#125;</div><div class="line">    <span class="comment">//...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里要解释的一点是，我们在<code>&lt;list&gt;&lt;/list&gt;</code>标签中写上的<code>@handleFinished=&quot;handleFinished&quot;</code>的意思是：</p>
<p><strong>当子组件向我们发送’handleFinished’事件时（对应 <code>v-on: handleFinished</code>）,我们去调用当前组件中的“handleFinished”方法（对应 <code>=&quot;handleFinished&quot;</code>）</strong></p>
<p>到这一步写完后，当前的todo应用就基本上是已经动态可用了。</p>
<h2 id="实现localStorage存储数据"><a href="#实现localStorage存储数据" class="headerlink" title="实现localStorage存储数据"></a><em>实现localStorage存储数据</em></h2><p>要使用localStorage来存储数据，我们首先要定义<code>Store</code>对象，并添加两个方法：</p>
<ol>
<li>保存数据 <code>save(todos: Array): void</code></li>
<li>读取数据 <code>fetch(): Array</code></li>
</ol>
<p>为了简便我们直接把<code>Store</code>对象写在<code>app.vue</code>里。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">  <span class="keyword">import</span> ...</div><div class="line"></div><div class="line">  const STORAGE_KEY = <span class="string">'vue-todo'</span>;</div><div class="line">  <span class="keyword">let</span> Store = &#123;</div><div class="line">    save(items)&#123;</div><div class="line">      <span class="built_in">window</span>.localStorage.setItem(STORAGE_KEY, <span class="built_in">JSON</span>.stringify(items))</div><div class="line">    &#125;,</div><div class="line">    fetch()&#123;</div><div class="line">      <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(<span class="built_in">window</span>.localStorage.getItem(STORAGE_KEY)) || []</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="comment">//...</span></div><div class="line">  &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后，我们给<code>data</code>中的<code>todos</code>设定从localStorage中取值：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">//...</span></div><div class="line">  data()&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="comment">//...</span></div><div class="line">      todos: Store.fetch() || [],</div><div class="line">      <span class="comment">//...</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>再添加一个<code>todos</code>的监听对象来帮助我们在<code>todos</code>的值发生改变时自动保存：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="comment">//...</span></div><div class="line">    watch: &#123;</div><div class="line">      <span class="attr">todos</span>: &#123;</div><div class="line">        <span class="attr">handler</span>: <span class="function"><span class="keyword">function</span>(<span class="params">items</span>) </span>&#123;</div><div class="line">          Store.save(items)</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">deep</span>: <span class="literal">true</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>到此我们就完成了数据的加载和保存。</p>
<h2 id="数据的处理：标签切换"><a href="#数据的处理：标签切换" class="headerlink" title="数据的处理：标签切换"></a>数据的处理：标签切换</h2><p>在data中我们预留了一个<code>tab</code>值用来标志当前的标签。现在我们来完成标签切换这一部分的内容。</p>
<p>首先在<code>template</code>中加入我们的标签代码块：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tabs"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-for</span>=<span class="string">"item in tabList"</span> <span class="attr">:class</span>=<span class="string">"['tab' , &#123;'active': isTabActive(item)&#125;]"</span> @<span class="attr">click</span>=<span class="string">"toggleTab(item)"</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>为了方便切换标签和标注标签的<code>active</code>属性，我们在<code>methods</code>里面会定义两个方法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">methods&#123;</div><div class="line">  isTabActive(tabName)&#123;</div><div class="line">    <span class="keyword">return</span> tabName === <span class="keyword">this</span>.tab</div><div class="line">  &#125;,</div><div class="line">  toggleTab(tabName)&#123;</div><div class="line">    <span class="keyword">this</span>.tab = tabName;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>我们在<code>style</code>中最好也加上一些相应的样式。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">.tab &#123;</div><div class="line">    margin 10px</div><div class="line">    color #777</div><div class="line">    &amp;.active &#123;</div><div class="line">        color #2c3e50</div><div class="line">        font-weight 700</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>添加之后，你点击屏幕上的标签时，就可以查看到标签的状态能够正常切换了。如果这一步没有问题，我们就来进行最后一步数据处理。</p>
<p>和数据存储一样，我们还是要新建一个<code>Filters</code>对象来帮我们处理数据。<br>我们在<code>Store</code>对象底下添加<code>Filters</code>对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> Filters = &#123;</div><div class="line">  All(items)&#123;</div><div class="line">    <span class="keyword">return</span> items</div><div class="line">  &#125;,</div><div class="line">  Active(items)&#123;</div><div class="line">    <span class="keyword">return</span> items.filter(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> !item.isFinished</div><div class="line">    &#125;)</div><div class="line">  &#125;,</div><div class="line">  Finished(items)&#123;</div><div class="line">    <span class="keyword">return</span> items.filter(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> item.isFinished</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>然后我们向<code>computed</code>对象中添加根据当前tab输出相应<em>todo数组</em>的方法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">computed: &#123;</div><div class="line">  filters()&#123;</div><div class="line">    <span class="keyword">return</span> Filters[<span class="keyword">this</span>.tab](<span class="keyword">this</span>.todos)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在<code>template</code>里把相应的<code>todos</code>替换成<code>computed</code>对象中的相应计算方法：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">list</span> <span class="attr">:todos</span>=<span class="string">"filters"</span> @<span class="attr">handleFinished</span>=<span class="string">"handleFinished"</span>&gt;</span><span class="tag">&lt;/<span class="name">list</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>现在当你点击不同的<code>tab</code>标签时，也会根据相应的标签展示出不同的事件。</p>
<p>到此，一个简单的todo应用就写完了。<br>当前项目的源码已经扔到github上：<a href="https://github.com/morenyang/vue-todo-list/tree/demo-version" target="_blank" rel="external">vue-todo-list at demo-version</a></p>

    </section>
</article>

</main>
<footer class="footer">
    <p>Powered by Moren YANG&nbsp;&nbsp;-&nbsp;&nbsp;ackn. <a href="https://hexo.io"> Hexo </a></p>
</footer>

</body>
</html>
